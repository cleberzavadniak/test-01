{"version":3,"sources":["LoginForm.js","SignUpForm.js","AutobahnApp.js","App.js","index.js"],"names":["LoginForm","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","username","password","session","status","status2","onChangeUsername","bind","assertThisInitialized","onChangePassword","onSubmit","event","setState","target","value","preventDefault","that","then","response","message","kwargs","token","catch","error","exc_type","msg","react_default","a","createElement","type","name","onChange","class","className","React","Component","SignUpForm","parent","success","goBack","console","log","confirmationToken","userId","id","signup","href","onClick","autobahn","require","AutobahnApp","connection","Connection","url","realm","authmethods","authid","onchallenge","onChallenge","onopen","onConnect","connected","showSignupForm","open","method","extra","src_SignUpForm","src_LoginForm","App","src_AutobahnApp_0","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.2bee4ee7.chunk.js","sourcesContent":["import React from 'react';\n\n\nclass LoginForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: '',\n      password: '',\n      session: props.session,\n      status: '',\n      status2: ''\n    };\n\n    this.onChangeUsername = this.onChangeUsername.bind(this);\n    this.onChangePassword = this.onChangePassword.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  onChangeUsername(event) {\n    this.setState({username: event.target.value, status: ''});\n  }\n\n  onChangePassword(event) {\n    this.setState({password: event.target.value, status: ''});\n  }\n\n  onSubmit(event) {\n    event.preventDefault();\n\n    var session = this.state['session'];\n    var username = this.state['username'];\n    var password = this.state['password'];\n\n    var that = this;\n\n    session.call('authenticate', [username, password]).then(function(response) {\n      var message = response.kwargs.message;\n\n      that.setState({\n        status: \"Sucesso!\",\n        status2: \"Token: \" + message.token,\n      });\n    }).catch(function(error) {\n      var exc_type = error.kwargs.exc_type;\n      var msg = error.kwargs.message\n      that.setState({status: exc_type + ': ' + msg});\n    });\n  }\n\n  render() {\n    return (\n      <div>\n        <form onSubmit={this.onSubmit}>\n          <p>\n            <label>Usuário:</label>\n            <input type='text' name='username' value={this.state.username} onChange={this.onChangeUsername} />\n          </p>\n          <p>\n            <label>Senha:</label>\n            <input type='password' name='password' value={this.state.password} onChange={this.onChangePassword} />\n            <br/>\n            <small class='smooth'>Esqueceu sua senha? Entre em contato com o Suporte.</small>\n          </p>\n          <p><input type='submit' name='submit' value='Entrar' /></p>\n        </form>\n        <div className='status'>{this.state.status}</div>\n        <div className='status2'>{this.state.status2}</div>\n      </div>\n    );\n  }\n}\n\nexport default LoginForm;\n","import React from 'react';\n\n\nclass SignUpForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      parent: props.parent,\n      username: '',\n      password: '',\n      session: props.session,\n      status: '',\n      success: null\n    };\n\n    this.onChangeUsername = this.onChangeUsername.bind(this);\n    this.onChangePassword = this.onChangePassword.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.goBack = this.goBack.bind(this);\n  }\n\n  onChangeUsername(event) {\n    this.setState({\n      username: event.target.value,\n      status: ''\n    });\n  }\n\n  onChangePassword(event) {\n    this.setState({\n      password: event.target.value,\n      status: ''\n    });\n  }\n\n  onSubmit(event) {\n    event.preventDefault();\n\n    var session = this.state['session'];\n    var username = this.state['username'];\n    var password = this.state['password'];\n\n    var that = this;\n\n    session.call('sign_up', [username, password]).then(function(response) {\n      console.log(response);\n      var message = response.kwargs.message;\n\n      that.setState({\n        confirmationToken: message.token,\n        userId: message.id,\n        status: \"\",\n        success: true\n      });\n    }).catch(function(error) {\n      var exc_type = error.kwargs.exc_type;\n      var msg = error.kwargs.message\n      that.setState({status: exc_type + ': ' + msg});\n    });\n  }\n\n  goBack(event) {\n    event.preventDefault();\n    this.state.parent.setState({signup: false});\n  }\n\n  render() {\n    if (this.state.success) {\n      return (\n        <div>\n          <h3>Nova conta criada com sucesso</h3>\n          <p>\n            Se essa aplicação fosse quente, você receberia\n            um e-mail contendo um link mágico que serviria\n            para confirmar sua conta.\n          </p>\n          <p>\n            O token <strong>de confirmação</strong> seria o {this.state.confirmationToken}.\n          </p>\n          <p>\n            Mas, por ora, basta você <a href='#' onClick={this.goBack}>clicar aqui</a> e\n            experimentar logar-se usando as credenciais que acabou de criar.\n          </p>\n          <div className='status'>{this.state.status}</div>\n        </div>\n      )\n    }\n\n    return (\n      <div>\n        <h3>Criar nova conta</h3>\n        <form onSubmit={this.onSubmit}>\n          <p>\n            <label>Usuário:</label>\n            <input type='text' name='username' value={this.state.username} onChange={this.onChangeUsername} /><br/>\n          </p>\n          <p>\n            <label>Senha:</label>\n            <input type='password' name='password' value={this.state.password} onChange={this.onChangePassword} /><br/>\n          </p>\n          <p><input type='submit' name='submit' value='Criar' /></p>\n        </form>\n        <p><small><a href='#' onClick={this.goBack}>Voltar</a></small></p>\n        <div className='status'>{this.state.status}</div>\n      </div>\n    );\n  }\n}\n\nexport default SignUpForm;\n","import React from 'react';\nimport './AutobahnApp.css';\n\nimport LoginForm from './LoginForm';\nimport SignUpForm from './SignUpForm';\n\nvar autobahn = require('autobahn');\n\n\nclass AutobahnApp extends React.Component {\n  constructor(props) {\n    super(props);\n\n    var connection = new autobahn.Connection({\n      url: 'ws://127.0.0.1:9090/ws',\n      realm: 'world',\n      authmethods: [\"ticket\"],\n      authid: 'frontend',\n      onchallenge: this.onChallenge\n    });\n\n    var that = this;\n    connection.onopen = function(session) {\n      that.onConnect(session);\n    }\n\n    this.state = {\n      connected: false,\n      connection: connection,\n      status: 'Connecting',\n      session: null,\n      signup: false\n    };\n\n    this.showSignupForm = this.showSignupForm.bind(this);\n\n    connection.open()\n  }\n\n  onChallenge(session, method, extra) {\n    if (method === \"ticket\") {\n      return 'sou um usuario';\n    } else {\n      console.log(\"don't know how to authenticate using '\" + method + \"'\");\n    }\n  }\n\n  onConnect(session) {\n    this.setState({connected: true, status: \"Connected\", session: session});\n  }\n\n  showSignupForm(event) {\n    event.preventDefault();\n    this.setState({signup: true});\n  }\n\n  render() {\n    if (this.state.connected) {\n      if (this.state.signup) {\n        return (\n          <div className='autobahn-app connected'>\n            <h2>Nova plataforma de cotação de apólices</h2>\n            <SignUpForm session={this.state.session} parent={this} />\n          </div>\n        );\n      }\n\n      return (\n        <div className='autobahn-app connected'>\n          <h2>Nova plataforma de cotação de apólices</h2>\n          <LoginForm session={this.state.session} />\n          <small><a href='#' onClick={this.showSignupForm}>Sou novo aqui</a></small>\n        </div>\n      );\n    }\n\n    return (\n      <div className='autobahn-app disconnected'>\n        <h2>Nova plataforma de cotação de apólices</h2>\n        <p>Conectando...</p>\n      </div>\n    );\n  }\n}\n\nexport default AutobahnApp;\n","import React from 'react';\nimport './App.css';\nimport AutobahnApp from './AutobahnApp';\n\nfunction App() {\n  return (\n    <div className=\"app\">\n      <AutobahnApp />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n// import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}